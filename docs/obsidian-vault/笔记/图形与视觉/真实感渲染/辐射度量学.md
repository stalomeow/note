---
date: 2024-12-30T12:32:40
---

# 辐射度量学

为了物理正确地计算光照，引入辐射度量学（Radiometry）。

## 立体角

![[Pasted image 20241230110810.png|Angles and Solid Angles]]

- 角（Angle）是弧长除以半径，$\theta=\dfrac{l}{r}$， 单位是 radians (rad)，一个圆是 $2 \pi$ rad
- 立体角（Solid Angle）是球面上一块面积除以球径平方， $\Omega=\dfrac{A}{r^2}$， 单位是 steradians (sr)，一个球是 $4 \pi$ sr

### 微分

![[Pasted image 20241230112147.png|Differential Solid Angles]]

球面上的面积微元

$$
\begin{align}
\mathrm{d}A&=(r \mathrm{d}\theta)(r \sin \theta \mathrm{d}\phi)\\
&=r^2 \sin \theta \mathrm{d}\theta \mathrm{d}\phi
\end{align}
$$

微分立体角

$$
\begin{align}
\mathrm{d}\omega&=\dfrac{\mathrm{d}A}{r^2}\\
&=\sin \theta \mathrm{d} \theta \mathrm{d} \phi
\end{align}
$$

球坐标系中 $\theta,\phi$ 可以确定一个方向，通常用 $\omega$ 表示这个方向的单位向量。

### 积分

对整个球 $S^2$ 积分

$$
\begin{align}
\Omega&=\int_{S^2} \mathrm{d}\omega\\
&=\int_{0}^{2\pi}\int_{0}^{\pi} \sin \theta \mathrm{d}\theta \mathrm{d} \phi\\
&=4\pi
\end{align}
$$

可以验证一个球是 $4\pi$ sr。

## Radiant energy

Radiant energy is the energy of electromagnetic radiation.

用 $Q$ 表示，单位是焦耳（Joule）。

## Radiant flux (power)

Radiant flux (power) is the energy emitted, reflected, transmitted or received, *per unit time*.

$$
\Phi=\frac{\mathrm{d}Q}{\mathrm{d}t}
$$

**单位时间**到达**某一面积**的 energy，单位是瓦特（Watt）。

光度学（Photometry）中类似的量叫 Luminous flux，单位是流明（lumen, lm） 。

### Lambert's Cosine Law

![[Pasted image 20241230201103.png|Lambert's Cosine Law]]

类似磁通量，如果左边的 Radiant flux (power) 为 $\Phi_1$，那么中间 $\Phi_2=\dfrac{\Phi_1}{2}$， 右边 $\Phi_3 = \Phi_1 \cdot \cos \theta$。

## Radiant Intensity

![[Pasted image 20241230183811.png|Radiant Intensity: Light Emitted From A Source]]

The radiant (luminous) intensity is the power *per unit solid angle* emitted by a point light source.

$$
I(\omega)=\frac{\mathrm{d}\Phi}{\mathrm{d}\omega}
$$

单位是 $W \cdot sr^{-1}$。对于各向同性点光源（Isotropic Point Source）

$$
\begin{align}
\Phi &= \int_{S^2} I \mathrm{d} \omega = 4\pi I\\
\\
I &= \frac{\Phi}{4\pi}
\end{align}
$$

光度学（Photometry）中类似的量叫 Luminous intensity，单位是坎德拉 $cd = candela = lm \cdot sr^{-1}$。

## Irradiance

![[Pasted image 20241230183910.png|Irradiance: Light Falling On A Surface]]

The irradiance is the power *per unit area* incident on a surface point.

$$
E(\mathbf{x})=\frac{\mathrm{d}\Phi(\mathbf{x})}{\mathrm{d}A}
$$

单位是 $W \cdot m^{-2}$。如果把 $\Phi(\mathbf{x})$ 类比为磁通量，$E(\mathbf{x})$ 相当于 $B \cos \theta$，是隐含了 Lambert's Cosine Law 中的 $\cos \theta$ 的。

光度学（Photometry）中类似的量叫 Illuminance，单位是勒克斯 $lx=lux=lm \cdot m^{-2}$。

### Falloff

![[Pasted image 20241230183000.png|Irradiance Falloff]]

Irradiance 会随距离衰减，但 Radiant Intensity 是不会衰减的。

## Radiance

Radiance is the fundamental field quantity that describes the distribution of light in an environment

- Radiance is the quantity associated with a ray
- Rendering is all about computing radiance

The radiance (luminance) is the power emitted, reflected, transmitted or received by a surface, *per unit solid angle*, *per projected unit area*.

![[Pasted image 20241230133534.png|Radiance: Light Traveling Along A Ray]]

$$
L(p,\omega)=\frac{\mathrm{d}^2 \Phi(p,\omega)}{\mathrm{d}\omega \mathrm{d}A \cos \theta}
$$

单位是 $W \cdot sr^{-1} \cdot m^{-2}$。

光度学（Photometry）中类似的量叫 Luminance，单位是 $cd \cdot m^{-2} = lm \cdot sr^{-1} \cdot m^{-2} = nit$。

### Incident Radiance

一种理解方式是把 $\mathrm{d}A$ 除上去，得到的 $\mathrm{d} E(p,\omega)$ ，它是 $p$ 处从方向 $\omega$ 到面积 $\mathrm{d}A$ 的 Irradiance。由于 Lambert's Cosine Law， $\mathrm{d}E(p,\omega)$ 隐含了一个和物体朝向有关的 $\cos \theta$，但 Radiance 描述的是光线的性质，不应该和某个物体有关， 所以要除以 $\cos \theta$ 。$\mathrm{d}E(p,\omega)$ 是 per unit area 的量，除以 $\cos \theta$ 后， $L(p,\omega)$ 就成了 per projected unit area 的量。

$$
L(p,\omega)=\frac{\mathrm{d} E(p,\omega) / \cos \theta}{\mathrm{d}\omega}
$$

这个公式一般用于描述 Incident Radiance: Irradiance per unit solid angle arriving at the surface. 进而计算入射的 Irradiance。

$$
\begin{align}
\mathrm{d} E(p,\omega) &= L_i(p,\omega) \cos \theta \mathrm{d} \omega\\
\\
E(p) &=\int_{H^2}L_i(p,\omega) \cos \theta \mathrm{d} \omega
\end{align}
$$

![[Pasted image 20241230134345.png|在单位半球上积分]]

### Exiting Radiance

另一种理解方式是把 $\mathrm{d}\omega$ 除上去，得到 $\mathrm{d}I(p,\omega)$，然后除以 $\mathrm{d}A$ 的投影面积。

$$
L(p,\omega)=\frac{\mathrm{d} I(p,\omega)}{\mathrm{d}A \cdot \cos \theta}
$$

这个公式一般用于描述 Exiting Radiance: The intensity per unit projected area leaving the surface.

## 参考

- [GAMES101_Lecture_14](https://sites.cs.ucsb.edu/~lingqi/teaching/resources/GAMES101_Lecture_14.pdf)
- [GAMES101_Lecture_15_new](https://sites.cs.ucsb.edu/~lingqi/teaching/resources/GAMES101_Lecture_15.pdf)
